<div class="row">
  <div class="col-md-12">
    <nb-card class="inline-form-card">
      <nb-card-header class="cabecalho">Cadastro de Cliente</nb-card-header>
    </nb-card>
    <nb-card [nbSpinner]="loading"
             nbSpinnerStatus="basic"
             nbSpinnerMessage="">
      <nb-card-body>
        <form (ngSubmit)="onSubmit()" [formGroup]="form" #formDir="ngForm">
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="nome" class="label">Nome</label>
                <input type="text" class="form-control" [ngClass]="{'is-invalid' : submitted && hasError('nome')}"
                       nbInput fullWidth id="nome" placeholder="Informe nome do cliente" formControlName="nome">
                <div *ngIf="hasError('nome') && formDir.submitted " class="invalid-feedback">
                  O nome é obrigatório.
                </div>
              </div>
            </div>
            <div class="col-sm-2">
              <label for="tipoPessoa" class="label">Tipo Pessoa</label>
              <div class="form-group">
                <nb-select placeholder="Selecione" id="tipoPessoa"
                           [ngClass]="{'select-error' : submitted && hasError('tipoPessoa')}"
                           [fullWidth]="fullWidth" formControlName="tipoPessoa">
                  <nb-option value="Física">Física</nb-option>
                  <nb-option value="Juridica">Juridica</nb-option>
                </nb-select>
                <div *ngIf="hasError('tipoPessoa') && formDir.submitted" class="erro-validation">
                  Tipo pessoa é obrigatório.
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label for="cpfCnpj" class="label">CPF/CNPJ</label>
                <input type="text" mask="CPF_CNPJ" nbInput fullWidth
                       class="form-control" [ngClass]="{'is-invalid' : submitted && hasError('cpfCnpj')}"
                       id="cpfCnpj" placeholder="Informe CPF ou CNPJ" formControlName="cpfCnpj">
                <div *ngIf="hasError('cpfCnpj') && formDir.submitted" class="invalid-feedback">
                  Cpf ou Cnpj é obrigatório.
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-8">
              <div class="form-group">
                <label for="endereco" class="label">Endereço</label>
                <input type="text" nbInput fullWidth id="endereco"
                       class="form-control" [ngClass]="{'is-invalid' : submitted && hasError('endereco')}"
                       placeholder="Informe endereço" formControlName="endereco">
                <div *ngIf="hasError('endereco') && formDir.submitted" class="invalid-feedback">
                  O endereco é obrigatório.
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label for="numero" class="label">Número</label>
                <input type="text" nbInput fullWidth id="numero" placeholder="Informe número" formControlName="numero">
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-3">
              <label for="estado" class="label">Estado</label>
              <div class="form-group">
                <nb-select placeholder="Selecione" id="estado" [(selected)]="selectedEstado" [compareWith]="compareById" [fullWidth]="fullWidth"
                           formControlName="estado"
                (selectedChange)="carregarCidadeEstadoId($event)">
                  <nb-option *ngFor="let estado of estados" [value]="estado" >
                    {{estado !== undefined ? estado["nome"] : ''}}
                  </nb-option>
                </nb-select>
              </div>
            </div>
            <div class="col-sm-3">
              <label for="cidade" class="label">Cidade</label>
              <div class="form-group">
                <nb-select placeholder="Selecione" id="cidade" [fullWidth]="fullWidth"
                           [(selected)]="selectedCidade" [compareWith]="compareById"
                           [ngClass]="{'select-error' : submitted && hasError('cidade')}"
                           formControlName="cidade">
                  <nb-option *ngFor="let cidade of cidades" [value]="cidade">
                    {{cidade !== undefined ? cidade["nome"] : ''}}
                  </nb-option>
                </nb-select>
                <div *ngIf="hasError('cidade') && formDir.submitted" class="erro-validation">
                  A cidade é obrigatória.
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <label for="contato1" class="label">Contato</label>
                <input type="text" mask='(00) 0 0000-0000 || (00) 0000-0000' nbInput fullWidth id="contato1" placeholder="Informe contato" formControlName="contato1">
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <label for="contato2" class="label">Recado</label>
                <input type="text" mask='(00) 0 0000-0000 || (00) 0000-0000' nbInput fullWidth id="contato2" placeholder="Informe de recado" formControlName="contato2">
              </div>
            </div>
          </div>
          <div class="row submit">
            <button class="col-md-2" type="submit" (click)="onCancel()" nbButton status="danger">
              Cancelar
            </button>
            <button class="col-md-2" type="submit" nbButton status="success">
              Salvar
            </button>
          </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>
